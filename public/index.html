<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Roadie</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">

        <link rel="stylesheet" href="resource/csss/bootstrap.min.css">
        <link rel="stylesheet" href="resource/csss/magnific-popup.css">
        <link rel="stylesheet" href="resource/csss/jquery-ui.css">
        <link rel="stylesheet" href="resource/csss/owl.carousel.min.css">
        <link rel="stylesheet" href="resource/csss/owl.theme.default.min.css">
        <link rel="stylesheet" href="resource/csss/bootstrap-datepicker.css">

        <link rel="stylesheet" href="resource/csss/aos.css">
        <link rel="stylesheet" href="resource/csss/rangeslider.css">

        <link rel="stylesheet" href="resource/csss/style.css">

    </head>
    <body>
        <div class="site-wrap">
            <div class="site-blocks-cover overlay" style="background-image: url(resource/hero_1.jpg);" data-aos="fade"
                 data-stellar-background-ratio="0.5">
                <div class="container">
                    <div class="row align-items-center justify-content-center text-center">

                        <div class="col-md-10">
                            <div class="row justify-content-center mb-4">
                                <div class="col-md-10 text-left">
                                    <h1 data-aos="fade-up">Roadie</h1>
                                    <p data-aos="fade-up" data-aos-delay="100">Makes finding restaurant easier during a
                                        ride</p>
                                </div>
                            </div>

                            <div class="form-search-wrap p-2" data-aos="fade-up" data-aos-delay="200">
                                <form method="post">
                                    <div class="row align-items-center">
                                        <div class="col-lg-12 col-l-5 no-sm-border">
                                            <input id="origin" type="text" class="form-control" placeholder="Origin">
                                        </div>
                                        <div class="col-lg-12 col-l-5 no-sm-border ">
                                            <div class="wrap-icon">
                                                <input id="destination" type="text" class="form-control"
                                                       placeholder="Destination">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>


            <div id="root">
            </div>


            <footer class="site-footer" style="padding: 5%">
                <div class="row pt-1 mt-1 text-center">
                    <div class="col-md-12">
                        <div class="pt-1">
                            <p>
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                                All rights reserved | This template is made with <i class="icon-heart"
                                                                                    aria-hidden="true"></i> by <a
                                    href="https://colorlib.com" target="_blank">Colorlib</a>
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            </p>
                        </div>
                    </div>

                </div>
            </footer>
        </div>

        <script>
            // This example adds a search box to a map, using the Google Place Autocomplete
            // feature. People can enter geographical searches. The search box will return a
            // pick list containing a mix of places and predicted search terms.

            // This example requires the Places library. Include the libraries=places
            // parameter when you first load the API. For example:
            // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

            function process() {
                console.log("It works");
                // console.log(dLocation.geometry.location.lat() + " - " + dLocation.geometry.location.lng());
                // makeCalls();
            }

            // function makeCalls() {
            //     axios({
            //         url: 'http://www.basebally.net/api/',
            //         method: 'GET',
            //     }).then(function(response) {
            //         console.log(response);
            //     });
            //
            //     // axios({
            //     //     url: "https://api.transposit.com/app/cyeung/roadie/api/v1/execute/yelp_get_businesses_search"
            //     //     method: "POST"
            //     // })
            //     axios.post("https://api.transposit.com/app/cyeung/roadie/api/v1/execute/yelp_get_businesses_search", {
            //         "parameters": {
            //             "latitude": 34.072222,
            //             "longitude": -118.239990
            //         }
            //     }).then(function(response) {
            //         console.log(response.data);
            //         populateList(response.data);
            //     });
            // }

            // function populateList(data) {
            //     let restaurantList = document.getElementById("restaurantList").innerHTML;
            //     restaurantList.append(data[0])
            // }

            function initAutocomplete() {
                let input = document.getElementById('origin');

                let autocomplete = new google.maps.places.Autocomplete(input);

                autocomplete.addListener('place_changed', function() {
                    let place = window.oLocation = autocomplete.getPlace();
                    console.log(place.geometry.location.lat() + " - " + place.geometry.location.lng()) ;
                    // document.getElementById('location-snap').innerHTML = place.formatted_address;
                    // document.getElementById('lat-span').innerHTML = place.geometry.location.lat();
                    // document.getElementById('lon-span').innerHTML = place.geometry.location.lng();
                });
                // initAutocomplete2();
                init();
            }

            // var oLocation, dLocation;

            function init() {
                let input = document.getElementById('destination');

                let autocomplete = new google.maps.places.Autocomplete(input);

                autocomplete.addListener('place_changed', function() {
                    let place = window.dLocation = autocomplete.getPlace();
                    console.log(place.geometry.location.lat() + " - " + place.geometry.location.lng()) ;
                    // document.getElementById('location-snap').innerHTML = place.formatted_address;
                    // document.getElementById('lat-span').innerHTML = place.geometry.location.lat();
                    // document.getElementById('lon-span').innerHTML = place.geometry.location.lng();
                });
            }

            function initAutocomplete2() {
                let map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: 34.052235, lng: -118.243683 },
                    zoom: 13,
                    mapTypeId: 'roadmap'
                });

                // Create the search box and link it to the UI element.
                let input = document.getElementById('destination');
                let searchBox = new google.maps.places.SearchBox(input);
                map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

                // Bias the SearchBox results towards current map's viewport.
                map.addListener('bounds_changed', function () {
                    searchBox.setBounds(map.getBounds());
                });

                let markers = [];
                // Listen for the event fired when the user selects a prediction and retrieve
                // more details for that place.
                searchBox.addListener('places_changed', function () {
                    let places = searchBox.getPlaces();

                    if (places.length == 0) {
                        return;
                    }

                    // Clear out the old markers.
                    markers.forEach(function (marker) {
                        marker.setMap(null);
                    });
                    markers = [];

                    // For each place, get the icon, name and location.
                    let bounds = new google.maps.LatLngBounds();
                    places.forEach(function (place) {
                        if (!place.geometry) {
                            console.log("Returned place contains no geometry");
                            return;
                        }
                        let icon = {
                            url: place.icon,
                            size: new google.maps.Size(71, 71),
                            origin: new google.maps.Point(0, 0),
                            anchor: new google.maps.Point(17, 34),
                            scaledSize: new google.maps.Size(25, 25)
                        };

                        // Create a marker for each place.
                        markers.push(new google.maps.Marker({
                            map: map,
                            icon: icon,
                            title: place.name,
                            position: place.geometry.location
                        }));

                        if (place.geometry.viewport) {
                            // Only geocodes have viewport.
                            bounds.union(place.geometry.viewport);
                        } else {
                            bounds.extend(place.geometry.location);
                        }
                    });
                    map.fitBounds(bounds);
                });
            }

            // function init() {
            //     let input = document.getElementById('destination');
            //     let searchBox = new google.maps.places.SearchBox(input);
            // }

            // function init() {
            //     let defaultBounds = new google.maps.LatLngBounds(
            //         new google.maps.LatLng(-33.8902, 151.1759),
            //         new google.maps.LatLng(-33.8474, 151.2631));
            //
            //     let input = document.getElementById('destination');
            //
            //     let searchBox = new google.maps.places.SearchBox(input, {
            //         bounds: defaultBounds
            //     });
            // }

        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhSpfc-4x54rNg6o371_FVg4IINirICoQ&libraries=places&callback=initAutocomplete"
                async defer></script>
        <!--<script src="js/axios.js"></script>-->
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="resource/jss/jquery-3.3.1.min.js"></script>
        <script src="resource/jss/jquery-migrate-3.0.1.min.js"></script>
        <script src="resource/jss/jquery-ui.js"></script>
        <script src="resource/jss/popper.min.js"></script>
        <script src="resource/jss/bootstrap.min.js"></script>
        <script src="resource/jss/owl.carousel.min.js"></script>
        <script src="resource/jss/jquery.stellar.min.js"></script>
        <script src="resource/jss/jquery.countdown.min.js"></script>
        <script src="resource/jss/jquery.magnific-popup.min.js"></script>
        <script src="resource/jss/bootstrap-datepicker.min.js"></script>
        <script src="resource/jss/aos.js"></script>
        <script src="resource/jss/rangeslider.min.js"></script>

        <script src="resource/jss/main.js"></script>

    </body>
</html>